# TODOリスト作成ガイド

以下の要件を満たすTODOリストを、`task.md`としてマークダウン形式で作成してください。

## 要件

1. TDD（テスト駆動開発）のRed-Green-Refactorサイクルを厳密に守り、「テスト作成→テスト失敗→実装→テストパス→リファクタリング」を各ユニットで行える最小単位に分解すること。
   - TODOリストやサブタスクの順番もTDDのRed-Green-Refactorサイクルの順番に沿って記載してください。
   - たとえば「モデルのバリデーション」や「サービスメソッドのインターフェース」など、それぞれの機能（ユニット）ごとに独立した流れを作ってください。
   - リファクタ方針はテストが成功した後に立ててください。サブタスクを作成する段階では実装ファイルのリファクタというサブタスク項目があれば構いません。
   - ただし、自動テストによる検証が難しい場合にはTDDの原則に則らなくても良いです。
2. TODOリストには「実装」「テスト」「リファクタリング」「ファイル操作」に直接必要なタスクのみを含め、ドキュメント確認や要件再チェックなどの外部作業は含めないこと。
3. ネストはサブタスクを1階層までとし、それ以上深い階層は作らないこと。
4. サブタスクでは必ず「（作成）<ファイルパス>」「（更新）<ファイルパス>」「（削除）<ファイルパス>」という形式でファイル名と操作を明示し、そのうえで必要な内容を記載すること。

## サンプル出力フォーマット（参考例）

- [ ] ユーザー登録モデルのバリデーションを作成

  - [ ] （作成）models/User.ts  
    - ここで空のクラスを作成し、コミット（例：`class User {}` のみ記載）  
  - [ ] （作成）tests/UserModel.test.ts  
    - まずはバリデーションテストコードを記載してテスト実行し、失敗することを確認  
  - [ ] （更新）models/User.ts  
    - テストをパスするように最低限のバリデーションロジックを実装し、テストをパスさせる  
  - [ ] （更新）models/User.ts  
    - リファクタリング：重複コードを整理し、可読性・保守性を高める  
  - [ ] （更新）tests/UserModel.test.ts  
    - リファクタ後もテストが通ることを確認し、余計なアサートがないか見直す  

- [ ] ユーザーサービスのインターフェースを作成

  - [ ] （作成）services/UserService.ts  
    - まずはクラス定義と空のメソッドシグネチャのみ記載  
  - [ ] （作成）tests/UserService.test.ts  
    - `register` メソッドに対するテストコードを記載し、失敗を確認  
  - [ ] （更新）services/UserService.ts  
    - `register` メソッドをテストグリーンする最低限の実装を行う  
  - [ ] （更新）services/UserService.ts  
    - リファクタリング：メソッド内のロジックを整理し、依存を分離する  
  - [ ] （更新）tests/UserService.test.ts  
    - リファクタ後もテストが通るか確認し、テストケースに冗長性がないかチェック  

- [ ] ユーザーコントローラーの API エンドポイントを作成

  - [ ] （作成）controllers/UserController.ts  
    - まずは空のクラスとルート定義のみ記載  
  - [ ] （作成）tests/UserController.test.ts  
    - `POST /users` に対するテストシナリオを記載し、失敗を確認  
  - [ ] （更新）controllers/UserController.ts  
    - テストをパスする最低限のエンドポイントロジックを実装  
  - [ ] （更新）controllers/UserController.ts  
    - リファクタリング：レスポンスフォーマットや例外処理を整理し、一貫性を確保  
  - [ ] （更新）tests/UserController.test.ts  
    - リファクタ後もテストが通るか確認し、API レスポンスのアサートを見直す  
